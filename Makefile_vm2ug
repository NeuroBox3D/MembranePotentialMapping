include $(UGROOT)/ug.conf

# application include paths corresponding to libraries

ANNDIR = ../annlib
VUGDIR = .

ANNLIB = $(ANNDIR)/lib/libANN.a

ANNINC = $(ANNDIR)/include

PCDIR       = ../pclib

PCLIB       = $(PCDIR)/libtutor$(UG_LIBSUFFIX).a

# application include paths corresponding to libraries
LCFLAGS		= -I$(PCDIR) -I$(ANNINC) -I$(VUGDIR)

APPL		= app$(DIM)d

PROGNAME 	= $(APPL)$(SUFFIX)

OBJECTS 	= app.o problems.o domains$(DIM)d.o vm2ug.o bg.o my_commands.o solve.o gating.o

$(APPL): pclib annlib $(OBJECTS) $(UG_LIBS) Makefile
	c++ -o $(PROGNAME) $(OBJECTS) $(PCLIB) $(UG_LIBS) $(UG_LFLAGS) $(ANNLIB)
	$(ARCH_POSTLINK)

pclib:
	cd ../pclib; make; cd ../appl;

annlib:
	cd ../annlib; make macosx-g++; cd ../appl;

.c.o:
	$(ARCH_C++) $(UG_CFLAGS) $(LCFLAGS) $<

.cc.o:
	$(ARCH_C++) $(UG_CFLAGS) $(LCFLAGS) $<

clean:
	cd ../pclib; make clean; cd ../appl;
	rm -f $(OBJECTS)

realclean:
	cd ../pclib; make clean; cd ../appl;
	cd ../annlib; make clean; cd ../appl;
	rm -f $(OBJECTS)

new:
	rm -f $(PROGNAME)
	make

build: clean
	make;
